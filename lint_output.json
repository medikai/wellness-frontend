[{"filePath":"C:\\Users\\Abcom\\walyness\\wellness-frontend\\src\\components\\course\\UnifiedCourseLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'VideoContent' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HTMLElementWithFS' is defined but never used.","line":43,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'initialModuleId' is defined but never used.","line":59,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'initialSectionId' is defined but never used.","line":60,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'selectedSection'. Either include it or remove the dependency array.","line":127,"column":6,"nodeType":"ArrayExpression","endLine":127,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [course, selectedSection]","fix":{"range":[3698,3706],"text":"[course, selectedSection]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isFullscreen' is assigned a value but never used.","line":137,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":137,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toggleModule' is assigned a value but never used.","line":155,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":155,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":173,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5195,5198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5195,5198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":227,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7041,7044],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7041,7044],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":240,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7665,7668],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7665,7668],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":256,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":256,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8325,8328],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8325,8328],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handlePrevious' is assigned a value but never used.","line":271,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":271,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isExpanded' is assigned a value but never used.","line":512,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":512,"endColumn":31}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState, useEffect, useRef } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport {\r\n  Course,\r\n  CourseContent,\r\n  Section,\r\n  Chapter,\r\n  RawChapterContent,\r\n  VideoContent,\r\n  TextContent,\r\n  QuizContent,\r\n  QuizQuestion,\r\n  ActivityContent,\r\n  GameContent,\r\n} from '@/types/course'\r\nimport { courseService } from '@/services/courseService'\r\n\r\nimport { Icon } from '@/components/ui'\r\n\r\ninterface SectionWithChapters extends Section {\r\n  chapters: Chapter[]\r\n}\r\n\r\ninterface SelectedSectionState {\r\n  moduleId: string\r\n  sectionId: string\r\n  section: SectionWithChapters\r\n  activeChapterId?: string\r\n  activeContentId?: string\r\n}\r\n\r\ninterface DocumentWithFS extends Document {\r\n  webkitFullscreenElement?: Element | null\r\n  mozFullScreenElement?: Element | null\r\n  msFullscreenElement?: Element | null\r\n  webkitExitFullscreen?: () => Promise<void>\r\n  mozCancelFullScreen?: () => Promise<void>\r\n  msExitFullscreen?: () => Promise<void>\r\n}\r\n\r\ninterface HTMLElementWithFS extends HTMLElement {\r\n  webkitRequestFullscreen?: () => Promise<void>\r\n  mozRequestFullScreen?: () => Promise<void>\r\n  msRequestFullscreen?: () => Promise<void>\r\n}\r\n\r\nconst getContentType = (content: CourseContent | RawChapterContent): string => {\r\n  if ('content_type' in content) {\r\n    return content.content_type\r\n  }\r\n  return content.type\r\n}\r\n\r\nexport default function UnifiedCourseLayout({\r\n  courseId,\r\n  course: initialCourse,\r\n  initialModuleId,\r\n  initialSectionId,\r\n  onClose,\r\n}: {\r\n  courseId: string\r\n  course?: Course\r\n  initialModuleId?: string\r\n  initialSectionId?: string\r\n  onClose?: () => void\r\n}) {\r\n  const router = useRouter()\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n\r\n  // State for course data\r\n  const [course, setCourse] = useState<Course | null>(initialCourse || null)\r\n  const [loading, setLoading] = useState(!initialCourse)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const [expandedModules, setExpandedModules] = useState<Set<string>>(new Set())\r\n  const [selectedSection, setSelectedSection] = useState<SelectedSectionState | null>(null)\r\n\r\n  // Quiz/Activity State\r\n  const [selectedOptions, setSelectedOptions] = useState<Record<string, string[]>>({}) // qId -> [values]\r\n  const [quizFeedback, setQuizFeedback] = useState<string | null>(null)\r\n  const [oneWordAnswer, setOneWordAnswer] = useState<string>('')\r\n  const [gameStatus, setGameStatus] = useState<'start' | 'playing' | 'completed'>('start')\r\n\r\n  // Fetch course outline\r\n  useEffect(() => {\r\n    if (initialCourse) return;\r\n\r\n    async function loadCourse() {\r\n      try {\r\n        setLoading(true)\r\n        const response = await courseService.getOutline(courseId)\r\n        if (response.ok) {\r\n          const { course: courseMeta, modules } = response.outline\r\n          setCourse({ ...courseMeta, modules })\r\n        } else {\r\n          setError('Failed to load course')\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n        setError('Error loading course')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    loadCourse()\r\n  }, [courseId, initialCourse])\r\n\r\n  // Initial content load\r\n  useEffect(() => {\r\n    if (!course || selectedSection) return\r\n\r\n    async function loadInitial() {\r\n      try {\r\n        if (course && course.modules.length > 0 && course.modules[0].sections.length > 0) {\r\n          const firstModule = course.modules[0]\r\n          const firstSection = firstModule.sections[0]\r\n          setExpandedModules(new Set([firstModule.id]))\r\n          handleSectionClick(firstModule.id, firstSection)\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    }\r\n    loadInitial()\r\n  }, [course])\r\n\r\n  // Reset state when content changes\r\n  useEffect(() => {\r\n    setSelectedOptions({})\r\n    setQuizFeedback(null)\r\n    setOneWordAnswer('')\r\n    setGameStatus('start')\r\n  }, [selectedSection?.activeContentId])\r\n\r\n  const [isFullscreen, setIsFullscreen] = useState(false)\r\n\r\n  const checkFullscreen = (): boolean => {\r\n    const doc = document as DocumentWithFS\r\n    return Boolean(\r\n      document.fullscreenElement ||\r\n      doc.webkitFullscreenElement ||\r\n      doc.mozFullScreenElement ||\r\n      doc.msFullscreenElement,\r\n    )\r\n  }\r\n\r\n  useEffect(() => {\r\n    const handler = () => setIsFullscreen(checkFullscreen())\r\n    document.addEventListener('fullscreenchange', handler)\r\n    return () => document.removeEventListener('fullscreenchange', handler)\r\n  }, [])\r\n\r\n  const toggleModule = (moduleId: string) => {\r\n    const newSet = new Set<string>()\r\n    if (!expandedModules.has(moduleId)) {\r\n      newSet.add(moduleId)\r\n    }\r\n    setExpandedModules(newSet)\r\n  }\r\n\r\n  const handleSectionClick = async (moduleId: string, section: Section) => {\r\n    const sectionWithChapters = section as SectionWithChapters\r\n    if (!sectionWithChapters.chapters || sectionWithChapters.chapters.length === 0) {\r\n      return\r\n    }\r\n\r\n    const firstChapter = sectionWithChapters.chapters[0]\r\n    let activeContentId: string | undefined\r\n    if (Array.isArray(firstChapter.content) && firstChapter.content.length > 0) {\r\n      // Safe access\r\n      const contentArray = firstChapter.content as any[];\r\n      activeContentId = contentArray[0].id;\r\n    }\r\n\r\n    setSelectedSection({\r\n      moduleId,\r\n      sectionId: section.id,\r\n      section: sectionWithChapters,\r\n      activeChapterId: firstChapter.id,\r\n      activeContentId\r\n    })\r\n\r\n    setExpandedModules(new Set([moduleId]))\r\n  }\r\n\r\n  const handleNext = async () => {\r\n    // if (!selectedSection?.activeContentId) return // Removed strict check\r\n    try {\r\n      // Find current position\r\n      if (!course || !selectedSection) return\r\n\r\n      let currentModuleIndex = -1;\r\n      let currentSectionIndex = -1;\r\n      let currentChapterIndex = -1;\r\n\r\n      // Naive search for current position\r\n      course.modules.forEach((m, mIdx) => {\r\n        if (m.id === selectedSection.moduleId) currentModuleIndex = mIdx;\r\n      });\r\n\r\n      if (currentModuleIndex === -1) return;\r\n      const currentModule = course.modules[currentModuleIndex];\r\n\r\n      currentModule.sections.forEach((s, sIdx) => {\r\n        if (s.id === selectedSection.sectionId) currentSectionIndex = sIdx;\r\n      });\r\n\r\n      if (currentSectionIndex === -1) return;\r\n      const currentSection = currentModule.sections[currentSectionIndex] as SectionWithChapters;\r\n\r\n      currentSection.chapters.forEach((c, cIdx) => {\r\n        if (c.id === selectedSection.activeChapterId) currentChapterIndex = cIdx;\r\n      });\r\n\r\n      // Logic to move to next structure:\r\n      // 1. Next chapter in same section?\r\n      // 2. Next section in same module?\r\n      // 3. Next module?\r\n\r\n      if (currentChapterIndex < currentSection.chapters.length - 1) {\r\n        const nextChapter = currentSection.chapters[currentChapterIndex + 1];\r\n        setSelectedSection({\r\n          ...selectedSection, // safely spread existing valid state\r\n          activeChapterId: nextChapter.id,\r\n          activeContentId: (nextChapter.content as any).id || undefined // Assuming structure\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (currentSectionIndex < currentModule.sections.length - 1) {\r\n        const nextSection = currentModule.sections[currentSectionIndex + 1] as SectionWithChapters;\r\n        if (nextSection.chapters.length > 0) {\r\n          setSelectedSection({\r\n            moduleId: selectedSection.moduleId, // Explicitly carry over valid module ID\r\n            sectionId: nextSection.id,\r\n            section: nextSection,\r\n            activeChapterId: nextSection.chapters[0].id,\r\n            activeContentId: (nextSection.chapters[0].content as any).id || undefined\r\n          });\r\n        }\r\n        return;\r\n      }\r\n\r\n      if (currentModuleIndex < course.modules.length - 1) {\r\n        const nextModule = course.modules[currentModuleIndex + 1];\r\n        if (nextModule.sections.length > 0) {\r\n          const nextSection = nextModule.sections[0] as SectionWithChapters;\r\n          if (nextSection.chapters.length > 0) {\r\n            setSelectedSection({\r\n              moduleId: nextModule.id,\r\n              sectionId: nextSection.id,\r\n              section: nextSection,\r\n              activeChapterId: nextSection.chapters[0].id,\r\n              activeContentId: (nextSection.chapters[0].content as any).id || undefined\r\n            });\r\n            setExpandedModules(new Set([nextModule.id]));\r\n          }\r\n        }\r\n        return;\r\n      }\r\n\r\n      alert(\"Congratulations! You have completed the course.\");\r\n\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  const handlePrevious = async () => {\r\n    // Simplified previous logic (can be robust like next later)\r\n    alert(\"Previous functionality coming soon\");\r\n  }\r\n\r\n  // --- Type Specific Handlers ---\r\n\r\n  const handleQuizSubmit = (questions: QuizQuestion[]) => {\r\n    let allCorrect = true;\r\n    for (const q of questions) {\r\n      const userAnswers = selectedOptions[q.id] || [];\r\n      const correctAnswers = q.options.filter(o => o.correct).map(o => o.id);\r\n\r\n      if (userAnswers.length !== correctAnswers.length) {\r\n        allCorrect = false;\r\n        break;\r\n      }\r\n      if (!userAnswers.every(a => correctAnswers.includes(a))) {\r\n        allCorrect = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (allCorrect) {\r\n      setQuizFeedback(\"Correct! Moving on...\");\r\n      setTimeout(() => {\r\n        handleNext();\r\n      }, 1500);\r\n    } else {\r\n      setQuizFeedback(\"Some answers are incorrect. Please try again.\");\r\n    }\r\n  }\r\n\r\n  const handleOneWordSubmit = (correctWord: string) => {\r\n    if (oneWordAnswer.trim().toLowerCase() === correctWord.toLowerCase()) {\r\n      setQuizFeedback(\"Correct! Perfect memory.\");\r\n      setTimeout(() => {\r\n        handleNext();\r\n      }, 1500);\r\n    } else {\r\n      setQuizFeedback(`Incorrect. Hint: It starts with ${correctWord.charAt(0)}`);\r\n    }\r\n  }\r\n\r\n  const handleGameComplete = () => {\r\n    setGameStatus('completed');\r\n    setTimeout(() => {\r\n      handleNext();\r\n    }, 1500);\r\n  }\r\n\r\n  const toggleOption = (qId: string, optId: string, isRadio: boolean) => {\r\n    setSelectedOptions(prev => {\r\n      if (isRadio) {\r\n        return { ...prev, [qId]: [optId] };\r\n      } else {\r\n        const current = prev[qId] || [];\r\n        if (current.includes(optId)) {\r\n          return { ...prev, [qId]: current.filter(x => x !== optId) };\r\n        } else {\r\n          return { ...prev, [qId]: [...current, optId] };\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  // --- Renderers ---\r\n\r\n  const renderContent = () => {\r\n    if (loading) return <div>Loading...</div>\r\n    if (error) return <div>{error}</div>\r\n    if (!selectedSection) return <div>Select a section</div>\r\n\r\n    const activeChapter = selectedSection.section.chapters.find(c => c.id === selectedSection.activeChapterId)\r\n    if (!activeChapter) return <div>Chapter not found</div>\r\n\r\n    // Assuming content is not array for dummy data simplicity or handled above\r\n    const activeContent: CourseContent = activeChapter.content as CourseContent;\r\n    const type = getContentType(activeContent);\r\n\r\n    return (\r\n      <div className=\"flex-1 h-full overflow-y-auto p-6 lg:p-10\">\r\n        <div className=\"max-w-5xl mx-auto h-full flex flex-col\">\r\n          <div className=\"flex justify-between items-center mb-8\">\r\n            <h1 className=\"text-3xl font-bold text-neutral-dark\">{activeChapter.title}</h1>\r\n            <div className=\"bg-teal-50 text-teal-700 px-4 py-2 rounded-full text-sm font-semibold tracking-wide shadow-sm\">\r\n              {selectedSection.section.title}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-3xl shadow-lg border border-neutral-100 p-8 lg:p-12 min-h-[500px] flex flex-col justify-center\">\r\n\r\n            {type === 'text' && (\r\n              <div className=\"prose max-w-none prose-teal\">\r\n                <h2 className=\"text-xl font-bold mb-4\">{(activeContent as TextContent).title}</h2>\r\n                <div dangerouslySetInnerHTML={{ __html: (activeContent as TextContent).content }} />\r\n                <div className=\"mt-8 flex justify-end\">\r\n                  <button onClick={handleNext} className=\"bg-teal-primary text-white px-6 py-2 rounded-lg hover:bg-teal-dark\">\r\n                    Next\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {type === 'quiz' && (\r\n              <div>\r\n                <h2 className=\"text-xl font-bold mb-6\">{(activeContent as QuizContent).title}</h2>\r\n                {(activeContent as QuizContent).questions.map((q, idx) => {\r\n                  const isMultiple = q.options.filter(o => o.correct).length > 1;\r\n                  return (\r\n                    <div key={q.id} className=\"mb-8\">\r\n                      <p className=\"font-semibold text-lg mb-4\">{idx + 1}. {q.question}</p>\r\n                      <div className=\"space-y-3\">\r\n                        {q.options.map(opt => {\r\n                          const isSelected = (selectedOptions[q.id] || []).includes(opt.id);\r\n                          return (\r\n                            <button\r\n                              key={opt.id}\r\n                              onClick={() => toggleOption(q.id, opt.id, !isMultiple)}\r\n                              className={`w-full text-left p-4 rounded-xl border-2 transition-all flex items-center justify-between\r\n                                                    ${isSelected ? 'border-teal-primary bg-teal-50' : 'border-neutral-200 hover:border-teal-200'}\r\n                                                `}\r\n                            >\r\n                              <span>{opt.label}</span>\r\n                              {isSelected && <Icon name=\"check\" size=\"sm\" className=\"text-teal-primary\" />}\r\n                            </button>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  )\r\n                })}\r\n\r\n                {quizFeedback && (\r\n                  <div className={`p-4 rounded-lg mb-4 text-center font-bold ${quizFeedback.includes(\"Correct\") ? \"bg-green-100 text-green-700\" : \"bg-red-100 text-red-700\"}`}>\r\n                    {quizFeedback}\r\n                  </div>\r\n                )}\r\n\r\n                <button\r\n                  onClick={() => handleQuizSubmit((activeContent as QuizContent).questions)}\r\n                  className=\"w-full bg-teal-primary text-white py-3 rounded-xl font-bold hover:bg-teal-dark transition-colors\"\r\n                >\r\n                  Submit Answer\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {type === 'activities' && (activeContent as ActivityContent).activity_type === 'single_choice' && (\r\n              <div>\r\n                <h2 className=\"text-xl font-bold mb-4\">{(activeContent as ActivityContent).title}</h2>\r\n                <p className=\"text-lg mb-6\">{(activeContent as ActivityContent).description}</p>\r\n\r\n                <input\r\n                  type=\"text\"\r\n                  value={oneWordAnswer}\r\n                  onChange={(e) => setOneWordAnswer(e.target.value)}\r\n                  placeholder=\"Type your answer here...\"\r\n                  className=\"w-full p-4 text-lg border-2 border-neutral-300 rounded-xl focus:border-teal-primary outline-none mb-6\"\r\n                />\r\n\r\n                {quizFeedback && (\r\n                  <div className={`p-4 rounded-lg mb-4 text-center font-bold ${quizFeedback.includes(\"Correct\") ? \"bg-green-100 text-green-700\" : \"bg-red-100 text-red-700\"}`}>\r\n                    {quizFeedback}\r\n                  </div>\r\n                )}\r\n\r\n                <button\r\n                  onClick={() => handleOneWordSubmit((activeContent as ActivityContent).options![0])} // Assuming correct answer is in options[0]\r\n                  className=\"w-full bg-teal-primary text-white py-3 rounded-xl font-bold hover:bg-teal-dark transition-colors\"\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {type === 'games' && (\r\n              <div className=\"flex flex-col items-center justify-center py-10 text-center\">\r\n                <div className=\"text-6xl mb-6\">ðŸŽ®</div>\r\n                <h2 className=\"text-2xl font-bold mb-2\">{(activeContent as GameContent).title}</h2>\r\n                <p className=\"text-neutral-medium max-w-md mb-8\">{(activeContent as GameContent).description}</p>\r\n\r\n                {gameStatus === 'start' && (\r\n                  <button onClick={() => setGameStatus('playing')} className=\"bg-teal-primary text-white px-8 py-3 rounded-full font-bold text-lg animate-bounce\">\r\n                    Start Game\r\n                  </button>\r\n                )}\r\n\r\n                {gameStatus === 'playing' && (\r\n                  <div className=\"animate-pulse\">\r\n                    <p className=\"text-xl font-bold text-teal-600 mb-4\">Game in progress...</p>\r\n                    <button onClick={handleGameComplete} className=\"bg-orange-500 text-white px-6 py-2 rounded-lg font-bold\">\r\n                      Simulate Win!\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {gameStatus === 'completed' && (\r\n                  <div className=\"flex flex-col items-center\">\r\n                    <p className=\"text-xl font-bold text-green-600 mb-4\">Great Job! ðŸŽ‰</p>\r\n                    <button\r\n                      onClick={handleNext}\r\n                      className=\"bg-teal-primary text-white px-8 py-3 rounded-xl font-bold hover:bg-teal-dark transition-colors shadow-lg\"\r\n                    >\r\n                      Next Lesson\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n          </div>\r\n        </div>\r\n      </div >\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"min-h-screen bg-background flex flex-col\">\r\n      {/* Top Navbar */}\r\n      <div className=\"bg-gradient-to-r from-teal-primary to-teal-dark border-b border-neutral-light/50 shadow-sm sticky top-0 z-40 flex items-center justify-between px-6 py-3\">\r\n        <div className=\"flex items-center gap-4 text-white shrink-0 mr-8\">\r\n          {!onClose && (\r\n            <>\r\n              <button\r\n                onClick={() => router.push('/classes')}\r\n                className=\"flex items-center space-x-2 text-sm font-medium bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-lg transition-colors\"\r\n              >\r\n                <Icon name=\"chevronLeft\" size=\"sm\" color=\"white\" />\r\n                <span>Back to Classes</span>\r\n              </button>\r\n              <div className=\"h-6 w-px bg-white/20\"></div>\r\n            </>\r\n          )}\r\n          <h2 className=\"font-bold text-lg whitespace-nowrap\">{course?.title || 'Loading...'}</h2>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex items-center gap-2 overflow-x-auto hide-scrollbar\">\r\n            {course?.modules.map((module) => {\r\n              const isExpanded = expandedModules.has(module.id)\r\n              const isCurrentModule = selectedSection?.moduleId === module.id;\r\n\r\n              return (\r\n                <div key={module.id} className=\"relative\">\r\n                  <button\r\n                    className={`flex items-center space-x-2 px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap\r\n                    ${isCurrentModule\r\n                        ? 'bg-white text-teal-dark shadow-sm'\r\n                        : 'text-white/90 opacity-70'\r\n                      }\r\n                  `}\r\n                  >\r\n                    <span>{module.title}</span>\r\n                  </button>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n\r\n          {onClose && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"flex items-center justify-center w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 transition-colors text-white\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <Icon name=\"x\" size=\"sm\" color=\"white\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-1 overflow-hidden flex flex-col relative\">\r\n        {renderContent()}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]}]