[{"filePath":"C:\\Users\\Abcom\\walyness\\wellness-frontend\\src\\app\\profile\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":94,"column":17,"nodeType":"JSXOpeningElement","endLine":98,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"//src/app/profile/page.tsx\r\n'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { Icon, Card } from '@/components/ui';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface UserProfile {\r\n  id: string;\r\n  fullname: string;\r\n  email: string;\r\n  phone?: string;\r\n  role?: string;\r\n  avatar_url?: string;\r\n}\r\n\r\nexport default function ProfilePage() {\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [profile, setProfile] = useState<UserProfile | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const response = await fetch('/api/auth/me', { cache: 'no-store' });\r\n        const data = await response.json() as { ok: boolean; profile?: UserProfile; user?: { id: string; email?: string; role?: string; name?: string } };\r\n\r\n        if (data.ok && data.profile) {\r\n          setProfile(data.profile);\r\n        } else if (data.ok && data.user) {\r\n          // Fallback to user data if profile is not available\r\n          setProfile({\r\n            id: data.user.id,\r\n            fullname: user?.name || data.user.email?.split('@')[0] || 'User',\r\n            email: data.user.email || user?.email || '',\r\n            role: data.user.role || user?.role,\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching profile:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      fetchProfile();\r\n    }\r\n  }, [user]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-neutral-medium\">Loading profile...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user || !profile) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-neutral-medium mb-4\">Unable to load profile</p>\r\n          <button\r\n            onClick={() => router.push('/home')}\r\n            className=\"px-4 py-2 bg-teal-primary text-white rounded-lg hover:bg-teal-dark transition-colors\"\r\n          >\r\n            Go to Home\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-neutral-dark mb-2\">Profile</h1>\r\n        <p className=\"text-neutral-medium\">Manage your account information and preferences</p>\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {/* Profile Card */}\r\n        <Card className=\"p-6\" shadow=\"md\">\r\n          <div className=\"flex items-start space-x-6\">\r\n            {/* Avatar */}\r\n            <div className=\"w-24 h-24 bg-gradient-to-br from-teal-primary to-teal-dark rounded-2xl flex items-center justify-center shadow-lg\">\r\n              {profile.avatar_url ? (\r\n                <img\r\n                  src={profile.avatar_url}\r\n                  alt={profile.fullname}\r\n                  className=\"w-24 h-24 rounded-2xl object-cover\"\r\n                />\r\n              ) : (\r\n                <Icon name=\"user\" size=\"xl\" color=\"white\" />\r\n              )}\r\n            </div>\r\n\r\n            {/* User Info */}\r\n            <div className=\"flex-1\">\r\n              <h2 className=\"text-2xl font-bold text-neutral-dark mb-2\">{profile.fullname}</h2>\r\n              {profile.role && (\r\n                <span className=\"inline-block px-3 py-1 bg-teal-light text-teal-primary rounded-full text-sm font-medium mb-3\">\r\n                  {profile.role === 'coach' ? 'Coach' : 'Student'}\r\n                </span>\r\n              )}\r\n\r\n              <div className=\"space-y-2 mt-4\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"w-5 h-5 flex items-center justify-center\">\r\n                    <span className=\"text-teal-primary text-sm\">@</span>\r\n                  </div>\r\n                  <span className=\"text-neutral-dark\">{profile.email}</span>\r\n                </div>\r\n                {profile.phone && (\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <Icon name=\"phone\" size=\"sm\" color=\"#059669\" />\r\n                    <span className=\"text-neutral-dark\">{profile.phone}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Account Information */}\r\n        <Card className=\"p-6\" shadow=\"md\">\r\n          <h3 className=\"text-xl font-bold text-neutral-dark mb-4\">Account Information</h3>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex justify-between items-center py-3 border-b border-neutral-light\">\r\n              <span className=\"text-neutral-medium font-medium\">Full Name</span>\r\n              <span className=\"text-neutral-dark font-semibold\">{profile.fullname}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center py-3 border-b border-neutral-light\">\r\n              <span className=\"text-neutral-medium font-medium\">Email</span>\r\n              <span className=\"text-neutral-dark font-semibold\">{profile.email}</span>\r\n            </div>\r\n            {profile.phone && (\r\n              <div className=\"flex justify-between items-center py-3 border-b border-neutral-light\">\r\n                <span className=\"text-neutral-medium font-medium\">Phone</span>\r\n                <span className=\"text-neutral-dark font-semibold\">{profile.phone}</span>\r\n              </div>\r\n            )}\r\n            <div className=\"flex justify-between items-center py-3\">\r\n              <span className=\"text-neutral-medium font-medium\">Role</span>\r\n              <span className=\"text-neutral-dark font-semibold capitalize\">\r\n                {profile.role || 'Student'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Actions */}\r\n        <Card className=\"p-6\" shadow=\"md\">\r\n          <h3 className=\"text-xl font-bold text-neutral-dark mb-4\">Actions</h3>\r\n          <div className=\"space-y-3\">\r\n            <button\r\n              onClick={() => router.push('/settings')}\r\n              className=\"w-full flex items-center justify-between px-4 py-3 bg-white border-2 border-neutral-light rounded-xl hover:border-teal-primary hover:bg-teal-light/50 transition-all duration-200\"\r\n            >\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Icon name=\"settings\" size=\"sm\" color=\"#059669\" />\r\n                <span className=\"font-medium text-neutral-dark\">Settings</span>\r\n              </div>\r\n              <Icon name=\"chevronRight\" size=\"sm\" color=\"#059669\" />\r\n            </button>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Abcom\\walyness\\wellness-frontend\\src\\services\\courseService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ApiContentResponse' is defined but never used.","line":3,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ApiNextResponse' is defined but never used.","line":5,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Module' is defined but never used.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":11}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_courseId' is defined but never used.","line":126,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":126,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_courseId' is defined but never used.","line":156,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":156,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_courseId' is defined but never used.","line":201,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":201,"endColumn":57,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    ApiOutlineResponse,\r\n    ApiContentResponse,\r\n    ApiProgressResponse,\r\n    ApiNextResponse,\r\n    RawChapterContent,\r\n    Course,\r\n    Module\r\n} from '@/types/course'\r\n\r\n// const API_BASE_URL = '/api'\r\n\r\n// Helper to get cookies - usually handled by browser automatically for same-origin requests\r\n// If specific header needed as in example 'Cookie: student_cookies.txt', we might need to handle it,\r\n// but for localhost web app, credentials: 'include' or default browser behavior is usually enough.\r\n\r\nconst MOCK_COURSE_ID = 'mock-course-1'\r\n\r\nconst MOCK_COURSE: Course = {\r\n    id: MOCK_COURSE_ID,\r\n    title: 'Ultimate Wellness Mastery',\r\n    description: 'A comprehensive guide to physical and mental well-being.',\r\n    instructor: 'Dr. Sarah Smith',\r\n    category: 'Health',\r\n    modules: [\r\n        {\r\n            id: 'mod-1',\r\n            title: 'Module 1: Foundations',\r\n            description: 'Basics of wellness.',\r\n            sections: [\r\n                {\r\n                    id: 'sec-1',\r\n                    title: 'Section 1: Introduction',\r\n                    description: 'Getting started.',\r\n                    chapters: [\r\n                        {\r\n                            id: 'chap-1',\r\n                            title: 'Welcome Video',\r\n                            description: 'Introduction to the course.',\r\n                            content: [\r\n                                {\r\n                                    id: 'cont-1',\r\n                                    chapter_id: 'chap-1',\r\n                                    content_type: 'video',\r\n                                    content_data: {\r\n                                        embed_url: 'https://www.youtube.com/embed/dQw4w9WgXcQ' // Rick Roll placeholder or generic\r\n                                    }\r\n                                }\r\n                            ]\r\n                        },\r\n                        {\r\n                            id: 'chap-2',\r\n                            title: 'Course Overview',\r\n                            description: 'What you will learn.',\r\n                            content: [\r\n                                {\r\n                                    id: 'cont-2',\r\n                                    chapter_id: 'chap-2',\r\n                                    content_type: 'text',\r\n                                    content_data: {\r\n                                        html: '<h2>Course Goals</h2><p>In this course you will learn...</p><ul><li>Sleep hygiene</li><li>Dietary basics</li></ul>'\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    id: 'sec-2',\r\n                    title: 'Section 2: Knowledge Check',\r\n                    description: 'Test your understanding.',\r\n                    chapters: [\r\n                        {\r\n                            id: 'chap-3',\r\n                            title: 'Basics Quiz',\r\n                            description: 'Quick quiz.',\r\n                            content: [\r\n                                {\r\n                                    id: 'cont-3',\r\n                                    chapter_id: 'chap-3',\r\n                                    content_type: 'quiz',\r\n                                    content_data: {\r\n                                        questions: [\r\n                                            {\r\n                                                q: 'How many hours of sleep are recommended?',\r\n                                                options: ['4-5', '7-9', '10-12']\r\n                                            },\r\n                                            {\r\n                                                q: 'Which is a macronutrient?',\r\n                                                options: ['Vitamin C', 'Protein', 'Iron']\r\n                                            }\r\n                                        ]\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n\r\n// Helper to find content\r\nconst findContent = (contentId: string): { content: RawChapterContent, index: number, allContents: RawChapterContent[] } | null => {\r\n    const allContents: RawChapterContent[] = []\r\n\r\n    // Flatten all content for easy linear navigation simulation\r\n    MOCK_COURSE.modules.forEach(m => {\r\n        m.sections.forEach(s => {\r\n            s.chapters?.forEach(c => {\r\n                if (Array.isArray(c.content)) {\r\n                    allContents.push(...c.content)\r\n                }\r\n            })\r\n        })\r\n    })\r\n\r\n    const index = allContents.findIndex(c => c.id === contentId)\r\n    if (index === -1) return null\r\n    return { content: allContents[index], index, allContents }\r\n}\r\n\r\nexport const courseService = {\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    async getOutline(_courseId: string): Promise<ApiOutlineResponse> {\r\n        // Simulate delay\r\n        await new Promise(resolve => setTimeout(resolve, 800))\r\n\r\n        return {\r\n            ok: true,\r\n            outline: {\r\n                course: {\r\n                    ...MOCK_COURSE,\r\n                    cost: 0,\r\n                    logo: '/images/logo.png',\r\n                    slug: 'wellness-mastery',\r\n                    type: 'self-paced',\r\n                    status: 'published',\r\n                    version: '1.0',\r\n                    currency: 'USD',\r\n                    group_id: 'grp-1',\r\n                    metadata: {},\r\n                    created_at: new Date().toISOString(),\r\n                    updated_at: new Date().toISOString(),\r\n                    is_template: false,\r\n                    banner_image: null,\r\n                    is_published: true\r\n                },\r\n                modules: MOCK_COURSE.modules\r\n            }\r\n        }\r\n    },\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    async getFirstContent(_courseId: string): Promise<RawChapterContent> {\r\n        return (MOCK_COURSE.modules[0].sections[0].chapters![0].content as RawChapterContent[])[0]\r\n    },\r\n\r\n    async getResumePoint(courseId: string): Promise<RawChapterContent> {\r\n        // Default to first for mock\r\n        return this.getFirstContent(courseId)\r\n    },\r\n\r\n    async getProgress(courseId: string): Promise<ApiProgressResponse['progress']> {\r\n        return {\r\n            percent: 30,\r\n            course_id: courseId,\r\n            profile_id: 'user-1',\r\n            total_items: 3,\r\n            completed_items: 1\r\n        }\r\n    },\r\n\r\n    async getNextContent(contentId: string): Promise<RawChapterContent | null> {\r\n        const found = findContent(contentId)\r\n        if (!found) return null\r\n        const { index, allContents } = found\r\n        if (index < allContents.length - 1) {\r\n            return allContents[index + 1]\r\n        }\r\n        return null\r\n    },\r\n\r\n    async getPreviousContent(contentId: string): Promise<RawChapterContent | null> {\r\n        const found = findContent(contentId)\r\n        if (!found) return null\r\n        const { index, allContents } = found\r\n        if (index > 0) {\r\n            return allContents[index - 1]\r\n        }\r\n        return null\r\n    },\r\n\r\n    async completeContent(contentId: string, courseId: string): Promise<void> {\r\n        console.log(`[Mock API] Content ${contentId} completed for course ${courseId}`)\r\n        await new Promise(resolve => setTimeout(resolve, 500))\r\n    },\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    async uncompleteContent(contentId: string, _courseId: string): Promise<void> {\r\n        console.log(`[Mock API] Content ${contentId} uncompleted`)\r\n    }\r\n}\r\n","usedDeprecatedRules":[]}]